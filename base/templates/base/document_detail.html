{% extends 'main.html'  %}
{% load static %}
{% block title %}{{document.name}}{% endblock title %}
{% block content %}
<main>
      <div class="container" style="max-width:720px;">
          <div class="shadow p-3 my-4 rounded" style="background-color: white;">
            <div style="text-align: center;">
                <div>
                    <span class="category__topic py-1 px-4">{{document.category}}</span>
                </div>
                <div class="my-3">
                    <div>
                        <h1 style="font-size:20px;">{{document.name}}</h1>
                    </div>
                    <div class="d-flex gap-3 my-2 text-muted justify-content-center" style="font-size: 14px;">
                      <div class="d-flex gap-1">
                        <div style="width: 15px;">
                        {% if request.user in document.likes.all %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="#00b4d8"  d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/>
                            </svg>
                        {% else %}
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="#6c757d" d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/>
                            </svg>
                        {% endif %}
                        </div>
                        <div>
                          <span>{{document.number_of_likes}} gostos</span>
                        </div>
                      </div>
                      <div class="d-flex gap-1">
                          <div style="width: 15px;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
                                <path fill="#6c757d" d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-167l80 80c9.4 9.4 24.6 9.4 33.9 0l80-80c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-39 39V184c0-13.3-10.7-24-24-24s-24 10.7-24 24V318.1l-39-39c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9z"/>
                            </svg>
                          </div>
                          <div>
                              <span>{{document.number_of_downloads}} downloads</span>
                          </div>
                      </div>
                  </div>
                    
                </div>
                <div>
                    <form action="{% url 'base:download_file' document.document %}" method="POST">
                        {% csrf_token %}
                        <input type="hidden" name="document_id" value="{{document.pk}}">
                        <button type="submit" class="btn btn-success w-100">Baixar</button>
                    </form>
                </div>
                <div class="d-flex mt-4 " style="gap: 10px;">
                    <form method="POST" action="{% url 'base:document_like' document.pk %}">
                        {% csrf_token %}
                        {% if request.user not in document.likes.all %}
                            <button class="btn border" style="width: 40px;" type="submit" name="document_id" value="{{document.id}}">
                                <svg class="w-100" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                    <path fill="#6c757d" d="M244 84L255.1 96L267.1 84.02C300.6 51.37 347 36.51 392.6 44.1C461.5 55.58 512 115.2 512 185.1V190.9C512 232.4 494.8 272.1 464.4 300.4L283.7 469.1C276.2 476.1 266.3 480 256 480C245.7 480 235.8 476.1 228.3 469.1L47.59 300.4C17.23 272.1 0 232.4 0 190.9V185.1C0 115.2 50.52 55.58 119.4 44.1C164.1 36.51 211.4 51.37 244 84C243.1 84 244 84.01 244 84L244 84zM255.1 163.9L210.1 117.1C188.4 96.28 157.6 86.4 127.3 91.44C81.55 99.07 48 138.7 48 185.1V190.9C48 219.1 59.71 246.1 80.34 265.3L256 429.3L431.7 265.3C452.3 246.1 464 219.1 464 190.9V185.1C464 138.7 430.4 99.07 384.7 91.44C354.4 86.4 323.6 96.28 301.9 117.1L255.1 163.9z"/>
                                </svg>
                            </button>
                        {% else %}
                            <button class="btn border" style="width: 40px;" type="submit" name="document_id" value="{{document.id}}">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                    <path fill="#00b4d8"  d="M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"/>
                                </svg>
                            </button>
                        {% endif %}
                        <button class="btn border" style="width: 40px;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                <path fill="#6c757d" d="M307 34.8c-11.5 5.1-19 16.6-19 29.2v64H176C78.8 128 0 206.8 0 304C0 417.3 81.5 467.9 100.2 478.1c2.5 1.4 5.3 1.9 8.1 1.9c10.9 0 19.7-8.9 19.7-19.7c0-7.5-4.3-14.4-9.8-19.5C108.8 431.9 96 414.4 96 384c0-53 43-96 96-96h96v64c0 12.6 7.4 24.1 19 29.2s25 3 34.4-5.4l160-144c6.7-6.1 10.6-14.7 10.6-23.8s-3.8-17.7-10.6-23.8l-160-144c-9.4-8.5-22.9-10.6-34.4-5.4z"/>
                            </svg>
                        </button>
                    </form>
                </div>
                <hr>
                <div style="text-align: left;">
                    <div class="smn_document_school">
                        <small class="d-flex gap-1">
                            <div>
                                <i class="fa-solid fa-building-columns" style="color: #6c757d;"></i>
                            </div>
                            <div>
                                <a class="text-muted" href="">{{document.school}}</a>
                            </div>
                        </small>
                      </div>
                      <div class="smn_document_course">
                        <small class="d-flex gap-1">
                            <div>
                                <i class="fa-solid fa-book" style="color: #6c757d;"></i>
                            </div>
                            <div>
                                <a class="text-muted" href="">{{document.course}}</a>
                            </div>
                        </small>
                      </div>
                </div>
                <hr>
                <div>
                    <div style="text-align: left;">
                        <h5>Descrição</h5>
                    </div>
                    <div class="small" style="text-align: justify;">
                        {% if document.description != None %}
                            <p>{{document.description}}</p>
                        {% endif %}
                    </div>
                </div>
                <hr>
                <div style="text-align: left;">
                    <div class="text-muted small">
                        <span>Compartilhado em {{document.created|date:"d/m/Y"}}</span>
                    </div>
                    <div class="d-flex mt-2">
                        <div class="avatar">
                            <img src="{% static 'images/profile.jpg' %}">
                        </div>
                        <div class="mx-2">
                            <div>
                                <span>{{user.username}}</span>
                            </div>
                            <div class="text-muted">
                                <small>{{user.document_set.all.count}} documentos publicados</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>  
          </div>
      </div>  
</main>
{% endblock content %}